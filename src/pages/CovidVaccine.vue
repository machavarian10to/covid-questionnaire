<template>
  <base-container page="3">
    <div>
      <div>
        <base-title title="áƒ£áƒ™áƒ•áƒ” áƒáƒªáƒ áƒ˜áƒšáƒ˜ áƒ®áƒáƒ ?*"></base-title>
        <radio-wrapper id="vaccine_yes" label="áƒ™áƒ˜">
          <input
            type="radio"
            name="vaccine"
            id="vaccine_yes"
            :value="true"
            v-model="hadVaccine"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>

        <radio-wrapper id="vaccine_no" label="áƒáƒ áƒ">
          <input
            type="radio"
            name="vaccine"
            id="vaccine_no"
            :value="false"
            v-model="hadVaccine"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>
      </div>

      <div v-if="hadVaccine === true">
        <base-title title="áƒáƒ˜áƒ áƒ©áƒ˜áƒ” áƒ áƒ áƒ”áƒ¢áƒáƒáƒ–áƒ” áƒ®áƒáƒ *"></base-title>
        <radio-wrapper
          id="first"
          label="áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ“áƒáƒ–áƒ áƒ“áƒ áƒ“áƒáƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ•áƒáƒ  áƒ›áƒ”áƒáƒ áƒ”áƒ–áƒ”"
        >
          <input
            type="radio"
            name="stage"
            id="first"
            value="first_dosage_and_registered_on_the_second"
            v-model="vaccineStage"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>

        <radio-wrapper id="fully" label="áƒ¡áƒ áƒ£áƒšáƒáƒ“ áƒáƒªáƒ áƒ˜áƒšáƒ˜ áƒ•áƒáƒ ">
          <input
            type="radio"
            name="stage"
            id="fully"
            value="fully_vaccinated"
            v-model="vaccineStage"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>

        <radio-wrapper
          id="not_second"
          label="áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ“áƒáƒ–áƒ áƒ“áƒ áƒáƒ  áƒ“áƒáƒ•áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ•áƒáƒ  áƒ›áƒ”áƒáƒ áƒ”áƒ–áƒ”"
        >
          <input
            type="radio"
            name="stage"
            id="not_second"
            value="first_dosage_and_not_registered_yet"
            v-model="vaccineStage"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>
      </div>

      <div
        v-if="
          hadVaccine === true &&
          vaccineStage === 'first_dosage_and_not_registered_yet'
        "
        class="mt-12 ml-16 text-[20px]"
      >
        <div>
          <p>áƒ áƒáƒ› áƒáƒ  áƒ’áƒáƒ“áƒáƒ“áƒ,</p>
          <p>áƒ‘áƒáƒ áƒ”áƒ› áƒáƒ®áƒšáƒáƒ•áƒ” áƒ“áƒáƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ“áƒ˜</p>
          <a
            href="https://booking.moh.gov.ge/"
            target="_blank"
            class="text-link-color"
            >https://booking.moh.gov.ge/</a
          >
        </div>
      </div>

      <div v-if="hadVaccine === false">
        <base-title title="áƒ áƒáƒ¡ áƒ”áƒšáƒáƒ“áƒ”áƒ‘áƒ˜?*"></base-title>
        <radio-wrapper
          id="vaccine_date"
          label="áƒ“áƒáƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ•áƒáƒ  áƒ“áƒ áƒ•áƒ”áƒšáƒáƒ“áƒ”áƒ‘áƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ¡"
        >
          <input
            type="radio"
            name="waiting"
            id="vaccine_date"
            value="waiting_date"
            v-model="waitingReason"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>

        <radio-wrapper id="no_vaccinate" label="áƒáƒ  áƒ•áƒ’áƒ”áƒ’áƒ›áƒáƒ•">
          <input
            type="radio"
            name="waiting"
            id="no_vaccinate"
            value="waiting_nothing"
            v-model="waitingReason"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>

        <radio-wrapper
          id="vaccine_plan"
          label="áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒšáƒ˜ áƒ›áƒáƒ¥áƒ•áƒ¡ áƒ“áƒ áƒ•áƒ’áƒ”áƒ’áƒ›áƒáƒ• áƒáƒªáƒ áƒáƒ¡"
        >
          <input
            type="radio"
            name="waiting"
            id="vaccine_plan"
            value="waiting_plan"
            v-model="waitingReason"
            class="w-[23px] h-[23px]"
          />
        </radio-wrapper>
      </div>

      <div
        v-if="hadVaccine === false && waitingReason === 'waiting_plan'"
        class="mt-12 ml-16 text-[20px]"
      >
        <div>
          <p>áƒáƒ®áƒáƒšáƒ˜ áƒáƒ áƒáƒ¢áƒáƒ™áƒáƒšáƒ˜áƒ— áƒ™áƒáƒ•áƒ˜áƒ“áƒ˜áƒ¡ áƒ’áƒáƒ“áƒáƒ¢áƒáƒœáƒ˜áƒ“áƒáƒœ 1</p>
          <p>áƒ—áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ¨áƒ”áƒ’áƒ˜áƒ«áƒšáƒ˜áƒáƒ— áƒ•áƒáƒ¥áƒªáƒ˜áƒœáƒ˜áƒ¡ áƒ’áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ.</p>

          <div class="mt-8">
            <p>ğŸ‘‰ áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ‘áƒ›áƒ£áƒšáƒ˜</p>
            <a
              href="https://booking.moh.gov.ge/"
              target="_blank"
              class="text-link-color"
              >https://booking.moh.gov.ge/</a
            >
          </div>
        </div>
      </div>
    </div>

    <div class="mt-20">
      <base-background class="bg-vaccine-image"></base-background>

      <transition>
        <yellow-star
          v-if="showLogo"
          class="opacity-80 absolute top-[250px] right-[680px]"
        ></yellow-star>
      </transition>

      <div class="flex justify-start">
        <base-link :link="{ name: 'covid' }"></base-link>

        <base-button
          @click="redirect"
          :disabled="!questionsAnswered"
          :stroke="questionsAnswered"
        ></base-button>
      </div>
    </div>
  </base-container>
</template>

<script>
import BaseLink from "@/components/ui/BaseLink.vue";
import BaseTitle from "@/components/ui/BaseTitle.vue";
import YellowStar from "@/components/icons/YellowStar.vue";
import RadioWrapper from "@/components/simplify/RadioWrapper.vue";
import BaseBackground from "@/components/ui/BaseBackground.vue";

export default {
  data() {
    return {
      showLogo: false,
    };
  },
  mounted() {
    this.showLogo = true;
  },
  methods: {
    redirect() {
      this.$router.push({ name: "policy" });
    },
  },
  computed: {
    hadVaccine: {
      get() {
        return this.$store.getters.getVaccine;
      },
      set(value) {
        this.$store.dispatch("setVaccine", value);
      },
    },
    vaccineStage: {
      get() {
        return this.$store.getters.getStage;
      },
      set(value) {
        this.$store.dispatch("setStage", value);
      },
    },
    waitingReason: {
      get() {
        return this.$store.getters.getReason;
      },
      set(value) {
        this.$store.dispatch("setReason", value);
      },
    },
    questionsAnswered() {
      if (this.hadVaccine && this.vaccineStage) {
        return true;
      }
      if (!this.hadVaccine && this.waitingReason) {
        return true;
      }
      return false;
    },
  },
  components: {
    BaseLink,
    BaseTitle,
    YellowStar,
    RadioWrapper,
    BaseBackground,
  },
};
</script>

<style scoped>
.v-enter-from {
  transform: translate(-100px, 100px);
}
.v-enter-active {
  transition: all 0.3s ease-in;
}
.v-enter-to {
  transform: translate(0, 0);
}
</style>
